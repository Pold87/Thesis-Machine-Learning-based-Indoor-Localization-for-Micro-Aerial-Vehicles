\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\section{Hardware and Software of the Platform}
\label{sec:hardware}

In a first setting, the commercially available Parrot AR.Drone2.0 was
equipped with an Odroid XU-4 single board computer, a Logitech 525 HD
webcam, a WiFi module, and a USB connection between the Odroid board
and the AR.Drone2.0 flight controller to send and receive data between
the two processors. Figure~\ref{fig:comparison} shows the setup.

The Odroid processor has a full operating system (Ubuntu 15.04) and
allows to run arbitrary Linux software. While this setup allowed to
test algorithms on the rather powerful Odroid processor, the
additional weight resulted in unstable flight performance. Therefore,
we decided to modify the system to run it directly on-board of the UAV
and not on an external board such as the Odroid processor. This
removed the need for additional payload and made flight performance
very stable. Also, it reduced the need to buy and attach an external
processor and a point of failure. Another advantages is that the
framework can be easily ported to any UAV supported by the paparazzi
software. The disadvantages are that the on-board processors of many
MAVs have a lower performance than the Odroid processor. Additionally,
it required us to port the software from the high-level language
Python to the low-level language C without being able to rely on many
existing software libraries.

We decided to use the quadcopter \emph{Parrot Bebop Drone}
as prototype for all our tests. This UAV allow for navigating in
arbitrary directions without changing its yaw angle. Additionally,
several models show stable flight behavior, resulting in noise-free
images. It is equipped with a that allows for approximately 11 minutes
flying time. The UAV's dimensions are $28 \times 32 \times 3.6$\,cm
and it weighs 400\,g.

The UAV is equipped with two cameras: a front camera and a
downward-looking bottom camera. The proposed approach makes use of the
bottom camera only. This camera has a resolution of $640 \times 480$
pixels with a frequency of 30 frames per second. The UAV's processor
is a Parrot P7 dual-core CPU Cortex A9 with a tact rate of
800\,Mhz. It is equipped with 8~GB of flash memory. It runs a Linux
operating system. The full specifications of the UAV can be found at
\url{http://www.parrot.com/products/bebop-drone/}.

The original Bebop SDK was replaced with Paparazzi. Paparazzi is an
``open-source drone hardware and software project encompassing
autopilot systems and ground station software''. Its modular approach
allows for combining functions regarding stabilization, localization,
and control of UAVs.
The proposed approach is implemented as module in Paparazzi's computer
vision framework. Since low-level routines like accessing camera
information or attitude control for different platforms are already
implemented in Paparazzi, the proposed module can be readily used
across different platforms. Modules are written in the C programming
language and are cross-compiled on the host PC to make them suitable
for the UAV's processor. Afterwards, they are uploaded to the
microprocessor of the UAV, allowing for autonomous execution of the
compiled software. A downlink connection---from the UAV to the
groundstation---allows for monitoring the state of the aircraft (e.g.,
speed, altitude, position, battery status).

While the goal of the proposed system is to achieve an autonomous
system, monitoring the system is important for evaluation and safety
considerations. Figure~\ref{fig:gcs} shows the default ground control
station of Paparazzi.
For collecting data, real-time visualization of the position estimates
and enabling future users to keep track of the system states, a
graphical user interface (GUI) has been developed in the scope of this
thesis. The GUI is displayed in Figure~\ref{fig:gui}.

